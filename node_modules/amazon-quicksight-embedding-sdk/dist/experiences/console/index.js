"use strict";
// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
exports.__esModule = true;
exports.isConsoleExperience = exports.getConsoleExperienceIdentifier = exports.extractConsoleExperienceFromUrl = exports.createConsoleFrame = void 0;
var enums_1 = require("../../enums");
var createConsoleFrame_1 = __importDefault(require("./createConsoleFrame"));
exports.createConsoleFrame = createConsoleFrame_1["default"];
var isConsoleExperience = function (experience) {
    return !!experience && experience.experienceType === enums_1.ExperienceType.CONSOLE;
};
exports.isConsoleExperience = isConsoleExperience;
var extractConsoleExperienceFromUrl = function (url) {
    var matches = /^https:\/\/[^/]+\/embedding\/[^/]+\/(start(\/(favorites|dashboards|analyses))?|dashboards\/[\w-]+|analyses\/[\w-]+)(\?|$)/i.exec(url) || [];
    if (matches.length < 5) {
        return;
    }
    return {
        experienceType: enums_1.ExperienceType.CONSOLE
    };
};
exports.extractConsoleExperienceFromUrl = extractConsoleExperienceFromUrl;
var getConsoleExperienceIdentifier = function (experience) {
    if (!isConsoleExperience(experience)) {
        return;
    }
    var contextId = experience.contextId, experienceType = experience.experienceType, discriminator = experience.discriminator;
    return [contextId, experienceType, discriminator].filter(Boolean).join('-');
};
exports.getConsoleExperienceIdentifier = getConsoleExperienceIdentifier;
